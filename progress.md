Original prompt: Get rid of need for manuals folder. Go through the code and make sure it no longer requires pulls to the manual.

- Removed all `assets/manual` sheet paths from `SHEET_PATHS`.
- Removed legacy `SPRITE_LAYOUT` manual fallback mapping.
- Switched to strict custom-only sprite source (`MONTH_SPRITES`) for all 12 months.
- Added fail-fast guard in `buildDeck()` if any month sprite mapping is missing.
- Next: delete `assets/manual` folder and verify no references remain.
- Deleted `assets/manual` folder from the project.
- Verified there are no remaining `assets/manual` or legacy manual-sheet identifiers in `game.js`, `index.html`, or `style.css`.
- Validation limits: runtime smoke test not executed here because local `node` is unavailable in this environment.
- Implemented 4-of-month sweep capture rule:
  - Phase 1 (hand play): if 3 matching month cards are on field, playing 4th card captures all 4.
  - Phase 2 (deck draw): if drawn card matches 3 field cards of same month, captures all 4.
- Updated human selection flow so only 2-match cases prompt for field choice.
- Updated AI move evaluation to recognize and value 4-card month sweeps.
- Added helper `takeAllMonthMatchesFromField(month)`.
- Validation limits: runtime smoke test not executed here because local `node` is unavailable in this environment.
- Phase 1 interaction change implemented: human must click field card to collect whenever there is a match (1, 2, or 3).
- Hand phase now enters selection mode for 1/2/3 matches instead of auto-capturing 1 and 3.
- Draw phase now enters selection mode for human for 1/2/3 matches; resolution handles 3-match sweep capture.
- CPU flow unchanged in this phase (still auto-resolves).
- Validation limits: runtime smoke test not executed because local `node` is unavailable in this environment.
- Phase 2 implemented: CPU readability/pacing layer.
- Added staged CPU beats with delays:
  - think beat before playing hand card
  - field target preview beat (highlights target/sweep set)
  - delayed draw resolution beat after deck pull outcome
  - delayed pass vs koi-koi decision beat
- Added `state.aiPreview` and render support so field highlights are visible during CPU planning.
- Added `scheduleAIStep()` and refactored AI timers to support multi-step CPU turn pacing.
- Added `ai_preview` output in `renderGameToText` for deterministic inspection.
- Validation limits: runtime smoke test not executed because local `node` is unavailable in this environment.
- Phase 3 implemented: CPU now simulates field-pick interaction for deck-draw matches.
- For CPU draw matches (1/2/3), game now shows aiPreview highlight + prompt, pauses, then auto-confirms capture.
- 3-match draw case now visually previews sweep before capturing all four.
- Added player-only deck flip phase for draw step:
  - after phase-1 resolves, drawn card is staged face-down in Recent Deck Pull
  - player must tap Recent Deck Pull to reveal
  - reveal lingers briefly before resolving to field/capture selection
- Added `awaitingDeckFlip` state + draw reveal timer and cleanup hooks.
- Added deck panel glow/pulse + pointer cursor while awaiting player flip.
- Added `awaiting_deck_flip` in `renderGameToText`.
- Implemented deck-flip phase for CPU (Step 2):
  - CPU now stages face-down draw in Recent Deck Pull
  - auto-reveals after short delay
  - lingers face-up briefly
  - then resolves to no-match field land or existing CPU match-preview/capture flow
- `awaitingDeckFlip` now covers both player and CPU and is exposed in `renderGameToText` with owner name.
- Rule update: Sake Cup (9a) no longer counts as a basic/plain card.
- Kept Sake Cup as seed and preserved Moon/Blossom viewing yaku checks.
- Updated both scoring and AI captured-stat calculations to remove Sake-as-basic contribution.
- Added a second card corner indicator for card type beside month indicator.
- New type badge codes: `BRT` (light), `SED` (seed), `SCR` (scroll), `PLN` (basic/plain).
- Badge rendering now uses inline badge elements on cards (hand, field, and captured mini cards), not pseudo-content strings.
- Type badge is elongated and color-coded by type; month badge remains compact and immediately to its right.
- Mini captured cards also show both badges with scaled-down sizing.
- Validation limits: unable to run `node`/Playwright in this environment (`node: command not found`), so runtime smoke test was not executed here.
- Swapped badge positions per UI request: month badge is now on the left, type badge on its right (including mini cards).
- Capture display now auto-sorts on every render (no mutation of source captured arrays).
- Display order implemented: bright -> seed -> text scroll -> blue scroll -> red scroll -> plain.
- Tie-breakers: month ascending, then card id for deterministic left-to-right ordering.
- Moved type badge to top-right of cards; month badge remains top-left.
- Applied to both regular and mini cards via CSS-only position updates.
- Moved rules panel section to render below the bottom title bar (`Hanafuda Koi-Koi` + rules toggle).
- Rules toggle behavior unchanged, but expanded rules now appear directly underneath that bar.
- Rules panel scroll behavior hardened: panel has `max-height: 42vh` and `overflow-y: auto`.
- Converted rules content into expandable accordion sections using native `<details>` blocks.
- Each major rules group now expands/collapses independently in the rules panel.
- Added accordion styling for section headers, plus/minus indicator, and section body spacing.
- Corrected rules text note: Sake Cup does not count as basic.
- Replaced rules panel text with the new player-friendly instruction set from chat.
- Kept accordion UI and section-by-section expand/collapse behavior.
- New sections now include: Objective, Cards and Matching, Setup, Turn Structure, Capture Rules, Yaku/Pass/Koi-Koi, Round-to-Round Start Rules, Scoring, Quick Start.
- Added CPU phase-1 selected-card preview in CPU profile panel (avatar area).
- During CPU turn, selected hand card now shows briefly before the card is played to field.
- Preview uses new `cpu-phase1-preview-canvas` and temporary state `cpuPhase1PreviewCardId`.
- Avatar hides during preview and restores automatically when phase-1 resolve begins.
- Added `cpu_phase1_preview` to `render_game_to_text` payload for test/debug visibility.
- Validation: static server checks for index/js/css returned HTTP 200; Playwright smoke could not run here because `npx` is unavailable.
- Fixed CPU profile default layout artifact by forcing hidden phase1 preview canvas to fully collapse (`display: none !important` when `[hidden]`).
- Moved score/meta row (`CPU | Game x/12 Starts/Turn | You`) below context action bar.
- Relocated `Table Xx | Last Koi-Koi` indicator into field section on a centered status row.
- Added multiplier intensity visuals for table indicator via classes `mult-1..mult-4`:
  - 1x neutral
  - 2x warmer with light pulse/glow
  - 3x stronger orange-red pulse/glow
  - 4x red with strongest pulse/glow
- `renderTop()` now updates multiplier class each frame based on `state.tableMultiplier`.
- Updated hand instruction note behavior: now shows "Pick a card from your hand to play." when it's the human's actionable hand-selection state.
- Note priority now is: field choice > deck reveal > hand pick > hidden.
- Made hand instruction bar persistent to prevent layout shifting (always rendered with fixed min-height).
- Added note state styling classes: active (blue) vs muted (dim).
- Updated note logic to include simple CPU state text: "CPU playing.".
- Idle state now shows blank text in the same persistent bar.
- Extended persistent instruction bar to guide decision and progression states.
- Added human decision prompt with multiplier hint: "Choose Pass, or Koi-Koi for +Xx (to Yx)."
- Added forced-koi message when pass is disabled.
- Added round-end prompt: winner/no-scorer summary + "Click Next Game."
- Added match-end prompt: final score summary + "Click New Match."
- Replaced one-off field choice auto-scroll with centralized action-target snapping.
- Added `focusActiveActionTarget()` with priority-based targets:
  - field choice -> field
  - draw reveal -> recent deck pull
  - pass/koi or next/new buttons -> context bar
  - actionable hand pick -> player hand zone
  - CPU active turn -> field (or recent deck pull during draw reveal)
- Added dedupe guard (`autoFocusTargetKey`) so repeated renders don't keep re-snapping the same target.
- Replaced center-based auto snap with smart minimal-scroll behavior.
- New helper `scrollTargetIntoViewSmart()` scrolls only enough to keep target visible, with bottom-edge bias.
- Action targets now avoid center overshoot and appear near the bottom of viewport when scrolled into view.
- Removed field helper chip from field header to avoid overlapping/unreadable popups near multiplier status.
- Deleted `#field-helper` element from HTML, removed helper styles, and removed helper update logic in `renderChoiceMode()`.
- Guidance is now exclusively through the persistent instruction bar above the player hand.
- Removed CPU profile risk-style subtitle (High Risk / Balanced / Low Risk) from UI.
- CPU profile now shows only avatar and CPU name label.
- Mobile-only CPU hand layout updated to 4 columns x 2 rows (`max-width: 699px`), while desktop remains 8 columns x 1 row.
- Added explicit round-start snap to top in `startRound()`.
- Reset `autoFocusTargetKey` at round start so action-target snapping resumes cleanly after top reset.
- Implemented phase 1 + 2 foundation for start/load flow and game codes.
- Added startup menu gating:
  - `init()` now shows start menu after assets preload instead of auto-starting a match.
  - New menu actions wired: `New Game`, `Load From Code`.
- Added in-game code panel wiring:
  - `Code` header toggle opens/closes panel.
  - `Refresh Code`, `Copy Code`, `Load Code`, `Close` are wired.
- Added code engine in `game.js`:
  - Versioned format `HKK1.<payload>.<checksum>`.
  - UTF-8 base64url payload encoding/decoding.
  - FNV-style checksum validation.
  - Snapshot serialization of full round/match state (players, field, pile, pending states, multiplier, logs, etc.).
  - Snapshot validation for shape/types/known card IDs.
  - Hydration + runtime state ownership checks to prevent duplicate-card corruption.
  - Resume logic after load for CPU pending decision/deck-flip flows.
- Added styles for new UI elements in `style.css`:
  - `.top-actions`, `.code-panel*`, `.start-menu*`, status states.
- Smoke check run via local HTTP server (outside sandbox):
  - `index.html`, `game.js`, `style.css` all served with HTTP 200.
  - Confirmed HTML contains `#code-panel`, `#start-menu`, `#start-load-btn`.
- Test limitation:
  - Playwright scripted smoke test could not be run in this environment because `node`/`npx` are unavailable.
- Removed CPU avatar/profile UI per mobile layout fix request.
- CPU hand area now renders as a single 1x8 horizontal strip on all viewports (desktop unchanged behavior, mobile uses horizontal scroll instead of 2x4 wrap).
- CPU phase-1 reveal moved to in-hand slot:
  - during preview delay, the selected CPU hand card is shown face-up in its actual hand position;
  - all other CPU hand cards remain face-down.
- Deleted avatar/profile markup from `index.html` and removed related CSS/JS hooks.
- Validation smoke check:
  - `index.html` served 200, contains only `#cpu-hand` in CPU hand section.
  - Confirmed avatar/profile selectors no longer exist in served HTML/CSS.
- CPU hand readability tweak: phase-1 CPU reveal is now left-anchored.
- During CPU preview, selected card is rendered in the leftmost CPU-hand slot; remaining cards are shown after it.
- Visual effect: CPU hand now reads like a train queue (left shown card -> card leaves -> remaining hand shifts).
- Gameplay logic unchanged; this is a display-only reorder in `renderHands()`.
- Major HUD refactor applied:
  - Removed old `CPU | Game x/12 | You` score/meta row.
  - Added inline score badges to hand headers:
    - `CPU Hand` now includes red/bold `#cpu-score-inline`.
    - `Your Hand` now includes red/bold `#player-score-inline`.
  - Added `turn-meta` line in field section: `Starts: ... | Turn: ...`.
- Bottom title row button cluster updated:
  - Added `Game 1 / 12` button to the right-side cluster, to the left of `Action Log`.
  - Right-side order is now: `Game 1/12`, `Action Log`, `Code`, `Rules`.
- Added match round summary system:
  - New panel `#game-summary-panel` with 4 columns: `Month`, `You`, `CPU`, `Mult`.
  - Populated from new state field `roundHistory` and rendered by `renderRoundSummary()`.
  - Unplayed rounds show `-`; no-score rounds are marked via styling in `Mult` column.
- Save system updated for new round summary data:
  - Save code version bumped to `HKK2` (`SAVE_CODE_PREFIX = "HKK2"`, `SAVE_CODE_VERSION = 2`).
  - Snapshot now includes required `roundHistory`.
  - Validation/hydration now enforces roundHistory schema and restores it.
  - This is intentionally not backward compatible with old `HKK1` codes.
- Round history write paths:
  - `endRoundWithWinner`: records month + winner points + multiplier.
  - `endRoundDraw`: records month with 0/0 and current multiplier.
- Structural cleanup:
  - Rewrote `index.html` to a single valid document (previous duplicate full-document artifact removed).
- Smoke check:
  - Local server served updated HTML/CSS/JS (HTTP 200).
  - Confirmed new markers for inline scores, game-summary button/panel, and `HKK2` save constants.
- Moved `CPU Hand` section to sit directly above `Your Hand` (new order: captures -> field -> CPU hand -> player hand).
- Added compact CPU-hand-only card sizing (about 60% of player hand size):
  - mobile/default: `44x55`
  - desktop: `50x62`
- Kept `CPU Hand` and `Your Hand` header text/score styling unchanged and consistent.
- No gameplay logic changes; display-only layout and sizing update.
- Implemented reversible Phase-1 hand preview flow improvements:
  - Hand preview pending states now fully support both `handMatch` and `handPlace` through save/load (`serialize`, `validate`, `hydrate`).
  - `handPlace` pending ownership is now validated on hydrated states.
- Added no-match placement preview in Field:
  - While previewing a no-match hand card, a duplicate ghost card now appears in Field with the same glow language as choice targets.
  - Preview card is visually marked as a placement preview (`PLACE`) and remains non-interactive.
- Instruction bar now uses contextual pending prompts:
  - Replaced generic "Finish field choice above." with `getChoicePromptText(pending)` so hand-preview states explicitly tell the player to confirm/cancel.
- Focus behavior refined for preview type:
  - `handPlace` preview now auto-focuses to player-hand zone instead of field zone; match previews still focus field.
- Adjusted no-match placement interaction for consistency:
  - `handPlace` now confirms by tapping the glowing preview card in the Field (not by tapping hand card again).
  - Tapping the selected hand card again now cancels preview and returns to hand selection.
  - `handPlace.options` now includes the pending hand card id so field-click routing can resolve the preview target.
- Updated handPlace instruction copy:
  - Prompt now says to tap preview field card to place, or selected hand card to cancel.
- Auto-focus behavior updated:
  - `handPlace` pending now focuses Field (confirm target) instead of player hand.
- Visual affordance update:
  - Preview placement card keeps glow and is now marked selectable for cursor/interaction consistency.
- Smoke check:
  - Local server served `index.html` and `game.js` with HTTP 200 on port 5185.
- Hand-match preview cancel parity implemented:
  - While `handMatch` preview is active, tapping the selected hand card again now cancels preview (same behavior as `handPlace`).
  - Switching to a different hand card during preview still works as before.
- Updated hand-match instruction copy to include explicit cancel guidance and 3-match sweep wording.
- Smoke check: local server served `index.html` and `game.js` with HTTP 200 on port 5185.
